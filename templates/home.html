{% extends "base.html" %}

{% block title %}NIRD Quest - Accueil{% endblock %}

{% block extra_css %}
<style>
    /* BONHOMME GAULOIS ANIM√â */
    .gaulois-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
    }

    .gaulois-bubble {
        position: relative;
        background: linear-gradient(135deg, #FFE4B5, #FFDAB9);
        border: 3px solid #8B4513;
        border-radius: 20px;
        padding: 1.5rem;
        max-width: 350px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        animation: bubbleAppear 0.5s ease;
        margin-bottom: 1rem;
    }

    @keyframes bubbleAppear {
        from {
            transform: scale(0.8) translateY(20px);
            opacity: 0;
        }
        to {
            transform: scale(1) translateY(0);
            opacity: 1;
        }
    }

    .gaulois-bubble::after {
        content: '';
        position: absolute;
        bottom: -15px;
        right: 30px;
        width: 0;
        height: 0;
        border-left: 15px solid transparent;
        border-right: 15px solid transparent;
        border-top: 15px solid #8B4513;
    }

    .gaulois-bubble::before {
        content: '';
        position: absolute;
        bottom: -10px;
        right: 33px;
        width: 0;
        height: 0;
        border-left: 12px solid transparent;
        border-right: 12px solid transparent;
        border-top: 12px solid #FFE4B5;
        z-index: 1;
    }

    .gaulois-bubble h4 {
        color: #8B4513;
        font-size: 1.1rem;
        margin-bottom: 0.8rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .gaulois-bubble p {
        color: #654321;
        line-height: 1.6;
        margin: 0;
    }

    .gaulois-character {
        background: white;
        border: 3px solid #8B4513;
        border-radius: 50%;
        width: 80px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        animation: bounce 2s infinite;
    }

    @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }

    .gaulois-character:hover {
        transform: scale(1.1) translateY(-5px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
    }

    .gaulois-character svg {
        width: 60px;
        height: 60px;
    }

    .close-bubble {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #E74C3C;
        color: white;
        border: none;
        border-radius: 50%;
        width: 25px;
        height: 25px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
    }

    .close-bubble:hover {
        background: #C0392B;
        transform: rotate(90deg);
    }

    @media (max-width: 768px) {
        .gaulois-container {
            bottom: 10px;
            right: 10px;
        }

        .gaulois-bubble {
            max-width: 250px;
            padding: 1rem;
            font-size: 0.9rem;
        }

        .gaulois-character {
            width: 60px;
            height: 60px;
        }

        .gaulois-character svg {
            width: 45px;
            height: 45px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="hero shine">
    <h1>üåü NIRD Quest</h1>
    <h2>Le Village Num√©rique R√©silient</h2>
    <p>
        Dans un monde domin√© par les g√©ants du num√©rique, un village r√©siste...
        <br>
        Devenez le protecteur de l'√©cole face √† l'Empire Num√©rico !
    </p>
    
    <div style="margin: 2rem 0;">
        <svg width="300" height="200" viewBox="0 0 300 200" style="max-width: 100%;">
            <!-- Village simplifi√© -->
            <rect x="50" y="120" width="60" height="60" fill="#4A90E2" rx="5"/>
            <polygon points="80,120 50,90 110,90" fill="#7B68EE"/>
            <rect x="60" y="150" width="15" height="25" fill="#50C878"/>
            <rect x="75" y="135" width="20" height="15" fill="#F39C12"/>
            
            <rect x="130" y="130" width="50" height="50" fill="#4A90E2" rx="5"/>
            <polygon points="155,130 130,105 180,105" fill="#7B68EE"/>
            <rect x="140" y="155" width="12" height="20" fill="#50C878"/>
            
            <rect x="200" y="125" width="55" height="55" fill="#4A90E2" rx="5"/>
            <polygon points="227,125 200,95 255,95" fill="#7B68EE"/>
            <rect x="210" y="150" width="15" height="25" fill="#50C878"/>
            
            <!-- √âtoiles -->
            <circle cx="30" cy="30" r="2" fill="#FFD700"/>
            <circle cx="80" cy="20" r="1.5" fill="#FFD700"/>
            <circle cx="150" cy="25" r="2" fill="#FFD700"/>
            <circle cx="220" cy="35" r="1.5" fill="#FFD700"/>
            <circle cx="270" cy="20" r="2" fill="#FFD700"/>
        </svg>
    </div>
    
    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
        <a href="/story" class="btn btn-success">üöÄ Commencer l'aventure</a>
        <a href="/quest" class="btn" style="background: linear-gradient(135deg, #7B68EE, #9370DB);">üè∞ La Qu√™te</a>
        <a href="/solutions" class="btn btn-secondary">üí° D√©couvrir NIRD</a>
    </div>
</div>

<div class="card">
    <h2>üéØ Qu'est-ce que NIRD ?</h2>
    <p style="font-size: 1.1rem; line-height: 1.8;">
        <strong>NIRD</strong> signifie <strong>Num√©rique Inclusif, Responsable et Durable</strong>.
        C'est une d√©marche pour reprendre le contr√¥le de notre num√©rique dans les √©tablissements scolaires.
    </p>
    
    <div class="scores-container" style="margin-top: 2rem;">
        <div class="score-item">
            <span class="solution-icon">‚ôªÔ∏è</span>
            <h3>Durabilit√©</h3>
            <p>R√©emploi, reconditionnement, lutte contre l'obsolescence</p>
        </div>
        
        <div class="score-item">
            <span class="solution-icon">üîì</span>
            <h3>Autonomie</h3>
            <p>Logiciels libres, Linux, ind√©pendance technologique</p>
        </div>
        
        <div class="score-item">
            <span class="solution-icon">üåç</span>
            <h3>Souverainet√©</h3>
            <p>Donn√©es en Europe, h√©bergement ma√Ætris√©, RGPD</p>
        </div>
        
        <div class="score-item">
            <span class="solution-icon">üå±</span>
            <h3>Sobri√©t√©</h3>
            <p>Consommation raisonn√©e, optimisation des ressources</p>
        </div>
        
        <div class="score-item">
            <span class="solution-icon">ü§ù</span>
            <h3>Inclusion</h3>
            <p>Accessibilit√©, formation, communs num√©riques</p>
        </div>
    </div>
</div>

<div class="card">
    <h2>üéÆ Comment √ßa marche ?</h2>
    <div style="display: grid; gap: 1.5rem; margin-top: 1.5rem;">
        <div style="display: flex; gap: 1rem; align-items: start;">
            <span style="font-size: 2rem;">1Ô∏è‚É£</span>
            <div>
                <h3>D√©couvrez l'histoire</h3>
                <p>Plongez dans l'univers du Village Num√©rique R√©silient et d√©couvrez les menaces de l'Empire Num√©rico.</p>
            </div>
        </div>
        
        <div style="display: flex; gap: 1rem; align-items: start;">
            <span style="font-size: 2rem;">2Ô∏è‚É£</span>
            <div>
                <h3>Faites vos choix</h3>
                <p>5 sc√©narios r√©alistes vous attendent : mat√©riel, logiciels, donn√©es, budget... Chaque d√©cision compte !</p>
            </div>
        </div>
        
        <div style="display: flex; gap: 1rem; align-items: start;">
            <span style="font-size: 2rem;">3Ô∏è‚É£</span>
            <div>
                <h3>Obtenez votre bilan</h3>
                <p>D√©couvrez vos scores en durabilit√©, autonomie, sobri√©t√©, souverainet√© et inclusion.</p>
            </div>
        </div>
        
        <div style="display: flex; gap: 1rem; align-items: start;">
            <span style="font-size: 2rem;">4Ô∏è‚É£</span>
            <div>
                <h3>Passez √† l'action</h3>
                <p>L'assistant IA vous g√©n√®re un plan d'action personnalis√© pour votre √©tablissement.</p>
            </div>
        </div>
        
        <div style="display: flex; gap: 1rem; align-items: start; background: rgba(123, 104, 238, 0.1); padding: 1.5rem; border-radius: 10px; border-left: 5px solid var(--secondary-color);">
            <span style="font-size: 2rem;">üè∞</span>
            <div>
                <h3>BONUS : La Qu√™te du Serveur Sacr√©</h3>
                <p>Un mini-jeu additionnel ! Explore 3 zones, r√©sous des √©nigmes et r√©cup√®re les artefacts pour restaurer le serveur du village.</p>
                <a href="/quest" class="btn" style="background: linear-gradient(135deg, #7B68EE, #9370DB); margin-top: 0.5rem;">üéÆ Jouer √† la Qu√™te</a>
            </div>
        </div>
    </div>
    
    <div style="text-align: center; margin-top: 2rem;">
        <a href="/game" class="btn btn-success" style="font-size: 1.2rem; padding: 1.2rem 2.5rem;">
            üéÆ Jouer maintenant
        </a>
    </div>
</div>

<div class="card">
    <h2>üåü Pourquoi c'est important ?</h2>
    <p style="font-size: 1.1rem; line-height: 1.8;">
        Les √©tablissements scolaires d√©pensent des millions en abonnements, renouvellent du mat√©riel trop souvent,
        et perdent la ma√Ætrise de leurs donn√©es. <strong>Il existe des alternatives !</strong>
    </p>
    
    <div style="background: rgba(231, 76, 60, 0.1); border-left: 5px solid #E74C3C; padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
        <h3 style="color: #E74C3C;">‚ö†Ô∏è Les risques actuels</h3>
        <ul style="margin-left: 2rem; margin-top: 1rem;">
            <li>D√©pendance aux Big Tech (Microsoft, Google, Apple...)</li>
            <li>Obsolescence programm√©e et gaspillage √©lectronique</li>
            <li>Donn√©es stock√©es hors Europe (Cloud Act am√©ricain)</li>
            <li>Abonnements co√ªteux et perp√©tuels</li>
            <li>Verrouillage technologique et perte d'autonomie</li>
        </ul>
    </div>
    
    <div style="background: rgba(80, 200, 120, 0.1); border-left: 5px solid #50C878; padding: 1.5rem; border-radius: 10px;">
        <h3 style="color: #50C878;">‚úÖ Les solutions NIRD</h3>
        <ul style="margin-left: 2rem; margin-top: 1rem;">
            <li>Linux et logiciels libres (gratuits et p√©rennes)</li>
            <li>R√©emploi et reconditionnement (√©conomies + √©cologie)</li>
            <li>H√©bergement souverain en Europe (RGPD)</li>
            <li>Mutualisation et communs num√©riques</li>
            <li>Formation et autonomie des √©quipes</li>
        </ul>
    </div>
</div>

<!-- BONHOMME GAULOIS ANIM√â -->
<div class="gaulois-container">
    <div class="gaulois-bubble" id="gauloisBubble" style="display: none;">
        <button class="close-bubble" onclick="closeBubble()">√ó</button>
        <h4>üí° Le savais-tu ?</h4>
        <p id="gauloisText"></p>
    </div>
    
    <div class="gaulois-character" onclick="showRandomJoke()" title="Clique pour une anecdote NIRD !">
        <!-- SVG Guerrier Gaulois -->
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <!-- Casque -->
            <ellipse cx="50" cy="35" rx="20" ry="15" fill="#B8860B"/>
            <ellipse cx="50" cy="30" rx="18" ry="12" fill="#DAA520"/>
            <!-- Ailes casque -->
            <ellipse cx="30" cy="28" rx="5" ry="8" fill="#B8860B" transform="rotate(-20 30 28)"/>
            <ellipse cx="70" cy="28" rx="5" ry="8" fill="#B8860B" transform="rotate(20 70 28)"/>
            
            <!-- T√™te -->
            <circle cx="50" cy="45" r="18" fill="#FFDAB9"/>
            
            <!-- Yeux -->
            <circle cx="44" cy="43" r="2" fill="#000"/>
            <circle cx="56" cy="43" r="2" fill="#000"/>
            
            <!-- Moustache -->
            <path d="M 35 52 Q 30 55 28 58" stroke="#654321" stroke-width="2" fill="none"/>
            <path d="M 65 52 Q 70 55 72 58" stroke="#654321" stroke-width="2" fill="none"/>
            
            <!-- Bouclier -->
            <ellipse cx="30" cy="65" rx="8" ry="12" fill="#8B4513"/>
            <ellipse cx="30" cy="65" rx="6" ry="10" fill="#DAA520"/>
            <circle cx="30" cy="65" r="3" fill="#FFD700"/>
            
            <!-- Corps (tunique) -->
            <rect x="40" y="58" width="20" height="25" fill="#4A90E2" rx="3"/>
            
            <!-- Bras -->
            <rect x="35" y="60" width="5" height="15" fill="#FFDAB9"/>
            <rect x="60" y="60" width="5" height="15" fill="#FFDAB9"/>
            
            <!-- Jambes -->
            <rect x="43" y="80" width="6" height="15" fill="#654321"/>
            <rect x="51" y="80" width="6" height="15" fill="#654321"/>
        </svg>
    </div>
</div>

<script>
    const jokes = [
        "M√™me Jules C√©sar a failli renoncer √† conqu√©rir la Gaule apr√®s une mise √† jour de Windows sur sa tablette romaine. Les druides recommandent Linux : plus stable que la potion magique.",
        "Il ne reste qu'un seul village gaulois qui r√©siste‚Ä¶ Les autres villages ont c√©d√© quand Rome leur a promis un support technique premium. Chez les irr√©ductibles, le support technique c'est un menhir.",
        "Panoramix utilise Linux : aucun plantage pendant la pr√©paration de potion. Le dernier druide √† avoir tent√© Windows a fait parler tout le village en latin bugu√©.",
        "Les l√©gionnaires ont invent√© CasqueOS, un OS romain‚Ä¶ crash√© d√®s qu'Ob√©lix a tap√© sur un casque. Incompatible avec les Gaulois.",
        "Le h√©ros critique souvent les Romains qui envoient des PDF impossibles √† ouvrir sans un plugin magique. Les Gaulois pr√©f√®rent des parchemins libres."
    ];

    let currentJokeIndex = 0;
    let jokeInterval;

    function showRandomJoke() {
        const bubble = document.getElementById('gauloisBubble');
        const text = document.getElementById('gauloisText');
        
        text.textContent = jokes[currentJokeIndex];
        bubble.style.display = 'block';
        
        currentJokeIndex = (currentJokeIndex + 1) % jokes.length;
    }

    function closeBubble() {
        document.getElementById('gauloisBubble').style.display = 'none';
    }

    // Afficher automatiquement une blague toutes les 60 secondes
    function startJokeRotation() {
        jokeInterval = setInterval(() => {
            showRandomJoke();
            // Auto-fermer apr√®s 15 secondes
            setTimeout(closeBubble, 15000);
        }, 60000); // Toutes les 60 secondes
    }

    // D√©marrer apr√®s 3 secondes (pour laisser l'utilisateur charger la page)
    setTimeout(() => {
        showRandomJoke();
        setTimeout(closeBubble, 15000);
        startJokeRotation();
    }, 3000);
</script>
{% endblock %}
